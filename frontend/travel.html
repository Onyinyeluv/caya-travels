<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>International Flights - Caya Express Travels</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-gold: #D4AF37;
      --dark-blue: #1a237e;
      --gray-900: #111827;
      --gray-800: #1f2937;
      --gray-700: #374151;
      --gray-600: #4b5563;
      --gray-500: #6b7280;
      --gray-400: #9ca3af;
      --gray-300: #d1d5db;
      --gray-200: #e5e7eb;
      --gray-100: #f3f4f6;
      --gray-50: #f9fafb;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      color: var(--gray-800);
      background: var(--gray-50);
    }

    /* Header */
    .header {
      background: white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-gold);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .logo-icon {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--primary-gold) 0%, #c49b2c 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      box-shadow: 0 2px 8px rgba(212, 175, 55, 0.3);
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      list-style: none;
      align-items: center;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--gray-700);
      font-weight: 500;
      transition: color 0.3s;
    }

    .nav-links a:hover {
      color: var(--primary-gold);
    }

    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      background: none;
      border: none;
      padding: 0.5rem;
      z-index: 101;
    }

    .hamburger span {
      width: 25px;
      height: 3px;
      background: var(--primary-gold);
      margin: 3px 0;
      transition: all 0.3s;
      border-radius: 3px;
    }

    .hamburger.active span:nth-child(1) {
      transform: rotate(45deg) translate(8px, 8px);
    }

    .hamburger.active span:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, rgba(26, 35, 126, 0.9) 0%, rgba(40, 53, 147, 0.9) 100%),
                  url('images/airplane .jpg') center/cover no-repeat;
      padding: 4rem 2rem 8rem;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      display: none;
    }

    .hero-content {
      max-width: 1200px;
      margin: 0 auto;
      text-align: center;
      color: white;
      position: relative;
      z-index: 1;
    }

    .hero h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 1rem;
      line-height: 1.2;
    }

    .hero p {
      font-size: 1.25rem;
      opacity: 0.95;
      margin-bottom: 3rem;
    }

    /* Search Card */
    .search-card {
      max-width: 1200px;
      margin: -5rem auto 3rem;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.15);
      padding: 2.5rem;
      position: relative;
      z-index: 10;
    }

    .search-tabs {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid var(--gray-200);
    }

    .search-tab {
      padding: 1rem 2rem;
      background: transparent;
      border: none;
      border-bottom: 3px solid transparent;
      font-weight: 600;
      color: var(--gray-600);
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.05rem;
    }

    .search-tab.active {
      color: var(--primary-gold);
      border-bottom-color: var(--primary-gold);
    }

    .trip-type {
      display: flex;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .radio-option {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
    }

    .radio-option input[type="radio"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: var(--primary-gold);
    }

    .radio-option label {
      font-weight: 500;
      color: var(--gray-700);
      cursor: pointer;
    }

    .search-form {
      display: grid;
      gap: 1.5rem;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-weight: 600;
      color: var(--gray-700);
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .form-group input,
    .form-group select {
      padding: 1rem;
      border: 2px solid var(--gray-300);
      border-radius: 10px;
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      transition: all 0.3s;
      background: white;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary-gold);
      box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
    }

    .passenger-selector {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }

    .passenger-input {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      border: 2px solid var(--gray-300);
      padding: 0.75rem;
      border-radius: 10px;
      background: white;
    }

    .passenger-input label {
      flex: 1;
      font-weight: 500;
      color: var(--gray-700);
      font-size: 0.9rem;
    }

    .passenger-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .passenger-btn {
      width: 32px;
      height: 32px;
      border: 2px solid var(--gray-300);
      background: white;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 700;
      color: var(--gray-700);
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .passenger-btn:hover:not(:disabled) {
      border-color: var(--primary-gold);
      color: var(--primary-gold);
      background: var(--gray-50);
    }

    .passenger-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .passenger-count {
      font-weight: 600;
      color: var(--gray-900);
      min-width: 24px;
      text-align: center;
    }

    .search-btn {
      background: var(--primary-gold);
      color: white;
      padding: 1.25rem 3rem;
      border: none;
      border-radius: 12px;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
    }

    .search-btn:hover {
      background: #C5A028;
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3);
    }

    /* Features Section */
    .features {
      max-width: 1200px;
      margin: 4rem auto;
      padding: 0 2rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
    }

    .feature-card {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      text-align: center;
      transition: transform 0.3s;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    .feature-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .feature-card h3 {
      font-size: 1.25rem;
      color: var(--gray-900);
      margin-bottom: 0.75rem;
    }

    .feature-card p {
      color: var(--gray-600);
      line-height: 1.6;
    }

    /* Popular Destinations */
    .destinations {
      max-width: 1200px;
      margin: 4rem auto;
      padding: 0 2rem;
    }

    .section-title {
      text-align: center;
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 3rem;
    }

    .destinations-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
    }

    .destination-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      transition: all 0.3s;
      cursor: pointer;
    }

    .destination-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    }

    .destination-image {
      height: 200px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      position: relative;
      overflow: hidden;
    }

    .destination-image::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.3) 100%);
    }

    .destination-info {
      padding: 1.5rem;
    }

    .destination-info h3 {
      font-size: 1.5rem;
      color: var(--gray-900);
      margin-bottom: 0.5rem;
    }

    .destination-info p {
      color: var(--gray-600);
      margin-bottom: 1rem;
    }

    .destination-price {
      color: var(--primary-gold);
      font-weight: 700;
      font-size: 1.25rem;
    }

    /* Footer */
    .footer {
      background: var(--gray-900);
      color: white;
      padding: 3rem 2rem 1.5rem;
      margin-top: 5rem;
    }

    .footer-content {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 3rem;
      margin-bottom: 2rem;
    }

    .footer-section h4 {
      color: var(--primary-gold);
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 0.5rem;
    }

    .footer-links a {
      color: var(--gray-300);
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-links a:hover {
      color: var(--primary-gold);
    }

    .footer-bottom {
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid var(--gray-700);
      color: var(--gray-400);
    }

    .whatsapp-float {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: #25D366;
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
      cursor: pointer;
      transition: all 0.3s;
      z-index: 1000;
      text-decoration: none;
    }

    .whatsapp-float:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(37, 211, 102, 0.6);
    }

    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2rem;
      }

      .search-card {
        margin: -3rem 1rem 2rem;
        padding: 1.5rem;
      }

      .search-tabs {
        flex-direction: column;
        gap: 0;
      }

      .passenger-selector {
        grid-template-columns: 1fr;
      }

      .hamburger {
        display: flex;
      }

      .nav-links {
        position: fixed;
        top: 0;
        right: -100%;
        width: 70%;
        height: 100vh;
        background: white;
        flex-direction: column;
        padding: 6rem 2rem 2rem;
        gap: 1rem;
        box-shadow: -5px 0 15px rgba(0,0,0,0.1);
        transition: right 0.3s ease;
        z-index: 100;
      }

      .nav-links.active {
        right: 0;
      }

      .nav-links li {
        width: 100%;
        text-align: left;
      }

      .nav-links a {
        display: block;
        padding: 1rem;
        font-size: 1.1rem;
        border-bottom: 1px solid var(--gray-200);
      }

      .logo span {
        font-size: 1rem !important;
      }

      .logo img {
        height: 60px !important;
      }

      .form-row {
        grid-template-columns: 1fr;
      }
    }
  </style>

</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav-container">
      <a href="index.html" class="logo">
        <img src="assets/caya-logo.jpg" alt="Caya Express Travel Logo" style="height: 90px; width: auto; background: white; padding: 8px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <span style="font-size: 1.3rem;">CAYA EXPRESS TRAVEL</span>
      </a>
      <button class="hamburger" onclick="toggleMenu()" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <ul class="nav-links" id="navMenu">
        <li><a href="index.html" onclick="closeMenu()">Our Services</a></li>
        <li><a href="study-abroad.html" onclick="closeMenu()">Study Abroad</a></li>
        <li><a href="visa.html" onclick="closeMenu()">Visa Services</a></li>
        <li><a href="tours.html" onclick="closeMenu()">Tour Packages</a></li>
        <li><a href="travel.html" onclick="closeMenu()">Flight Booking</a></li>
        <li><a href="agent-portal.html" onclick="closeMenu()">Agent Portal</a></li>
      </ul>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1>Book Your International Flight Today</h1>
      <p>Find the best deals on flights to destinations worldwide. Travel with confidence!</p>
    </div>
  </section>

  <!-- Search Card -->
  <div class="search-card">
    <div class="search-tabs">
      <button class="search-tab active">
        <span>‚úàÔ∏è Flights</span>
      </button>
    </div>

    <form id="flightSearchForm" class="search-form">
      <div class="trip-type">
        <label class="radio-option">
          <input type="radio" name="tripType" value="round-trip" checked>
          <span>Round Trip</span>
        </label>
        <label class="radio-option">
          <input type="radio" name="tripType" value="one-way">
          <span>One Way</span>
        </label>
        <label class="radio-option">
          <input type="radio" name="tripType" value="multi-city">
          <span>Multi-City</span>
        </label>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>
            <span>Flying From</span>
          </label>
          <input type="text" id="from" placeholder="Lagos (LOS)" list="airportOptions" required>
        </div>
        <div class="form-group">
          <label>
            <span>Flying To</span>
          </label>
          <input type="text" id="to" placeholder="London (LHR)" list="airportOptions" required>
        </div>
      </div>

      <datalist id="airportOptions">
        <option value="Lagos (LOS)"></option>
        <option value="London Heathrow (LHR)"></option>
        <option value="Dubai (DXB)"></option>
        <option value="New York JFK (JFK)"></option>
      </datalist>

      <div class="form-row">
        <div class="form-group">
          <label>
            <span>Departure Date</span>
          </label>
          <input type="date" id="departureDate" required>
        </div>
        <div class="form-group" id="returnDateGroup">
          <label>
            <span>Return Date</span>
          </label>
          <input type="date" id="returnDate">
        </div>
      </div>

      <div class="form-group">
        <label>
          <span>Passengers</span>
        </label>
        <div class="passenger-selector">
          <div class="passenger-input">
            <label>Adults (12+)</label>
            <div class="passenger-controls">
              <button type="button" class="passenger-btn" data-type="adults" data-change="-1" onclick="updatePassengers(event, 'adults', -1)">‚àí</button>
              <span class="passenger-count" id="adultsCount">1</span>
              <button type="button" class="passenger-btn" data-type="adults" data-change="1" onclick="updatePassengers(event, 'adults', 1)">+</button>
            </div>
          </div>
          <div class="passenger-input">
            <label>Children (2-11)</label>
            <div class="passenger-controls">
              <button type="button" class="passenger-btn" data-type="children" data-change="-1" onclick="updatePassengers(event, 'children', -1)">‚àí</button>
              <span class="passenger-count" id="childrenCount">0</span>
              <button type="button" class="passenger-btn" data-type="children" data-change="1" onclick="updatePassengers(event, 'children', 1)">+</button>
            </div>
          </div>
          <div class="passenger-input">
            <label>Infants (0-2)</label>
            <div class="passenger-controls">
              <button type="button" class="passenger-btn" data-type="infants" data-change="-1" onclick="updatePassengers(event, 'infants', -1)">‚àí</button>
              <span class="passenger-count" id="infantsCount">0</span>
              <button type="button" class="passenger-btn" data-type="infants" data-change="1" onclick="updatePassengers(event, 'infants', 1)">+</button>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>
          <span>Class</span>
        </label>
        <select id="class">
          <option value="economy">Economy</option>
          <option value="premium">Premium Economy</option>
          <option value="business">Business Class</option>
          <option value="first">First Class</option>
        </select>
      </div>

      <button type="button" class="search-btn" id="searchFlightsBtn" onclick="searchFlights()">
        <span>Search Flights</span>
      </button>
    </form>
  </div>

  <!-- Flight Results Display -->
  <div id="flightResults" style="max-width: 1200px; margin: 2rem auto; padding: 0 2rem; display: none;">
    <h2 style="text-align: center; margin-bottom: 2rem; color: var(--gray-900);">Available Flights</h2>
    <div id="resultsContainer"></div>
  </div>

  <!-- Reservation Modal -->
  <div id="reservationModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; overflow-y: auto;">
    <div style="background: white; max-width: 600px; margin: 2rem auto; padding: 2rem; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
        <h2 style="margin: 0; color: var(--gray-900);">Passenger Details</h2>
        <button onclick="closeReservationModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--gray-500);">√ó</button>
      </div>

      <form id="reservationForm" style="display: flex; flex-direction: column; gap: 1rem;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div>
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--gray-700);">Surname *</label>
            <input type="text" name="surname" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 1rem;">
          </div>
          <div>
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--gray-700);">Given Names *</label>
            <input type="text" name="given_names" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 1rem;">
          </div>
        </div>

        <div>
          <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--gray-700);">Email *</label>
          <input type="email" name="email" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 1rem;">
        </div>

        <div>
          <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--gray-700);">Phone Number *</label>
          <input type="tel" name="phone" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 1rem;">
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div>
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--gray-700);">Date of Birth *</label>
            <input type="date" name="dob" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 1rem;">
          </div>
          <div>
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--gray-700);">Nationality *</label>
            <input type="text" name="nationality" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 1rem;">
          </div>
        </div>

        <div>
          <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--gray-700);">Passport Number *</label>
          <input type="text" name="passport" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 1rem;">
        </div>

        <button type="submit" style="background: var(--primary-gold); color: white; padding: 1rem; border: none; border-radius: 8px; font-weight: 600; font-size: 1rem; cursor: pointer; margin-top: 1rem;">Submit Reservation</button>
      </form>
    </div>
  </div>

  <!-- Features -->
  <section class="features">
    <div class="feature-card">
      <div class="feature-icon">üíé</div>
      <h3>Best Price Guarantee</h3>
      <p>We guarantee the most competitive prices for all international flights</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">üîí</div>
      <h3>Secure Booking</h3>
      <p>Your payment and personal information are 100% secure with us</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">üìû</div>
      <h3>24/7 Support</h3>
      <p>Our travel experts are available round the clock to assist you</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">‚ö°</div>
      <h3>Instant Confirmation</h3>
      <p>Get immediate booking confirmation via WhatsApp and email</p>
    </div>
  </section>

  <!-- Popular Destinations -->
  <section class="destinations">
    <h2 class="section-title">Popular International Destinations</h2>
    <div class="destinations-grid">
      <div class="destination-card" onclick="searchDestination('London, UK')">
        <div class="destination-image" style="background: url('https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=400&h=300&fit=crop') center/cover;"></div>
        <div class="destination-info">
          <h3>London</h3>
          <p>United Kingdom</p>
        </div>
      </div>
      <div class="destination-card" onclick="searchDestination('Dubai, UAE')">
        <div class="destination-image" style="background: url('https://images.unsplash.com/photo-1512453979798-5ea266f8880c?w=400&h=300&fit=crop') center/cover;"></div>
        <div class="destination-info">
          <h3>Dubai</h3>
          <p>United Arab Emirates</p>
        </div>
      </div>
      <div class="destination-card" onclick="searchDestination('New York, USA')">
        <div class="destination-image" style="background: url('https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=400&h=300&fit=crop') center/cover;"></div>
        <div class="destination-info">
          <h3>New York</h3>
          <p>United States</p>
        </div>
      </div>
      <div class="destination-card" onclick="searchDestination('Toronto, Canada')">
        <div class="destination-image" style="background: url('https://images.unsplash.com/photo-1517935706615-2717063c2225?w=400&h=300&fit=crop') center/cover;"></div>
        <div class="destination-info">
          <h3>Toronto</h3>
          <p>Canada</p>
        </div>
      </div>
      <div class="destination-card" onclick="searchDestination('Paris, France')">
        <div class="destination-image" style="background: url('https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=400&h=300&fit=crop') center/cover;"></div>
        <div class="destination-info">
          <h3>Paris</h3>
          <p>France</p>
        </div>
      </div>
      <div class="destination-card" onclick="searchDestination('Sydney, Australia')">
        <div class="destination-image" style="background: url('https://images.unsplash.com/photo-1506973035872-a4ec16b8e8d9?w=400&h=300&fit=crop') center/cover;"></div>
        <div class="destination-info">
          <h3>Sydney</h3>
          <p>Australia</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h4>Quick Links</h4>
        <ul class="footer-links">
          <li><a href="programs.html">Study Programs</a></li>
          <li><a href="partner.html">Partner With Us</a></li>
          <li><a href="agent-portal.html">Agent Portal</a></li>
          <li><a href="travel.html">Travel</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Popular Routes</h4>
        <ul class="footer-links">
          <li><a href="#">Lagos - London</a></li>
          <li><a href="#">Lagos - Dubai</a></li>
          <li><a href="#">Lagos - Toronto</a></li>
          <li><a href="#">Lagos - New York</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Support</h4>
        <ul class="footer-links">
          <li><a href="#">Help Center</a></li>
          <li><a href="#">Contact Us</a></li>
          <li><a href="#">Terms & Conditions</a></li>
          <li><a href="#">Privacy Policy</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Contact</h4>
        <ul class="footer-links">
          <li><strong>Email:</strong></li>
          <li>cayaexpresstravels@gmail.com</li>
          <li>info@cayaexpresstravel.com</li>
          <li style="margin-top: 0.5rem;"><strong>Phone:</strong></li>
          <li>+234 810 154 9916</li>
          <li>+234 916 000 3177</li>
          <li>+234 706 543 3796</li>
          <li style="margin-top: 0.5rem;"><strong>Address:</strong></li>
          <li>Road 1, B70, Ikota Shopping Complex,</li>
          <li>V.G.C Ajah Lagos, Nigeria</li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Caya Express Travels. All rights reserved.</p>
    </div>
  </footer>

  <!-- WhatsApp Float Button -->
  <a href="https://wa.me/2348101549916" class="whatsapp-float" target="_blank" title="Chat on WhatsApp">
    üí¨
  </a>

  <!-- Mobile Menu Functions -->
  <script>
    // ===== ENVIRONMENT CONFIGURATION =====
    // For local development: Uses localhost
    // For production: Railway backend URL
    const API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
      ? 'http://localhost:3000'  // Local development
      : 'https://desirable-vision-production.up.railway.app';  // Production backend URL
    
    console.log('API Base URL:', API_BASE_URL);
    // ======================================

    function toggleMenu() {
      const navMenu = document.getElementById('navMenu');
      const hamburger = document.querySelector('.hamburger');
      if(!navMenu || !hamburger) return;
      navMenu.classList.toggle('active');
      hamburger.classList.toggle('active');
    }

    function closeMenu() {
      const navMenu = document.getElementById('navMenu');
      const hamburger = document.querySelector('.hamburger');
      if(!navMenu || !hamburger) return;
      navMenu.classList.remove('active');
      hamburger.classList.remove('active');
    }

    document.addEventListener('click', function(event) {
      const navMenu = document.getElementById('navMenu');
      const hamburger = document.querySelector('.hamburger');
      if(!navMenu || !hamburger) return;
      const isClickInside = navMenu.contains(event.target) || hamburger.contains(event.target);
      if (!isClickInside && navMenu.classList.contains('active')) {
        closeMenu();
      }
    });
  
    const passengers = {
      adults: 1,
      children: 0,
      infants: 0
    };

    // Track trip type and cabin class
    let tripType = 'one-way';
    let cabinClass = 'economy';
    let returnDate = '';

    // Set minimum date to today
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('departureDate').setAttribute('min', today);
    document.getElementById('returnDate').setAttribute('min', today);

    // Update passengers with explicit handler
    window.updatePassengers = function(evt, type, change) {
      evt.preventDefault();
      evt.stopPropagation();
      
      const current = passengers[type];
      const newValue = current + change;

      // Validation
      if (type === 'adults' && newValue < 1) return;
      if (newValue < 0) return;
      if (type === 'infants' && newValue > passengers.adults) {
        alert('Number of infants cannot exceed number of adults');
        return;
      }

      passengers[type] = newValue;
      document.getElementById(`${type}Count`).textContent = newValue;
      console.log(`Updated ${type} to ${newValue}`, passengers);
    };

    // Handle trip type change
    document.querySelectorAll('input[name="tripType"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        tripType = e.target.value;
        const returnDateGroup = document.getElementById('returnDateGroup');
        if (e.target.value === 'one-way') {
          returnDateGroup.style.display = 'none';
          returnDate = '';
        } else {
          returnDateGroup.style.display = 'flex';
        }
      });
    });

    // Update return date minimum when departure date changes
    document.getElementById('departureDate').addEventListener('change', (e) => {
      document.getElementById('returnDate').setAttribute('min', e.target.value);
    });

    // Track return date changes
    document.getElementById('returnDate').addEventListener('change', (e) => {
      returnDate = e.target.value;
    });

    // Track cabin class changes
    document.getElementById('class').addEventListener('change', (e) => {
      cabinClass = e.target.value;
    });

    // Handle form submission
    document.getElementById('flightSearchForm').addEventListener('submit', (e) => {
      e.preventDefault();

      const from = document.getElementById('from').value;
      const to = document.getElementById('to').value;
      const departureDate = document.getElementById('departureDate').value;
      const travelClass = document.getElementById('class').value;

      const totalPassengers = passengers.adults + passengers.children + passengers.infants;

      // Format WhatsApp message
      const message = `
FLIGHT BOOKING REQUEST

Flight Details:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
From: ${from}
To: ${to}
Departure: ${new Date(departureDate).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
${tripType !== 'one-way' ? `Return: ${new Date(returnDate).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}` : ''}
Trip Type: ${tripType.charAt(0).toUpperCase() + tripType.slice(1)}

Passengers:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Adults: ${passengers.adults}
Children (2-11): ${passengers.children}
Infants (0-2): ${passengers.infants}
Total: ${totalPassengers} passenger${totalPassengers > 1 ? 's' : ''}

Class: ${travelClass.charAt(0).toUpperCase() + travelClass.slice(1)}

Please send me available flight options and pricing for this route. Thank you!
      `.trim();

      // Redirect to WhatsApp
      const whatsappUrl = `https://wa.me/2349160003177?text=${encodeURIComponent(message)}`;
      window.open(whatsappUrl, '_blank');
    });

    // Quick destination search
    function searchDestination(destination) {
      document.getElementById('to').value = destination;
      document.getElementById('from').value = 'Lagos (LOS)';
      document.getElementById('from').focus();
      
      // Scroll to search form
      document.querySelector('.search-card').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    // Duffel API Flight Search
    const airportsDataUrl = "airports.json";
    let airportsIndex = [];

    function formatAirportLabel(airport) {
      const city = airport.city || airport.name || "";
      const country = airport.country || "";
      const name = airport.name && airport.name !== city ? ` - ${airport.name}` : "";
      return `${city}${name}${country ? `, ${country}` : ""} (${airport.iata})`;
    }

    function updateAirportOptions(query) {
      const datalist = document.getElementById("airportOptions");
      if (!datalist || !airportsIndex.length) return;

      const normalized = query.trim().toLowerCase();
      if (!normalized) return;

      const matches = airportsIndex
        .filter(a =>
          a.iata.toLowerCase().includes(normalized) ||
          (a.city && a.city.toLowerCase().includes(normalized)) ||
          (a.name && a.name.toLowerCase().includes(normalized)) ||
          (a.country && a.country.toLowerCase().includes(normalized))
        )
        .slice(0, 20);

      datalist.innerHTML = matches
        .map(airport => `<option value="${formatAirportLabel(airport)}"></option>`)
        .join("");
    }

    async function loadAirportsDataset() {
      try {
        const response = await fetch(airportsDataUrl);
        if (!response.ok) throw new Error("Failed to load airport dataset");
        const data = await response.json();

        airportsIndex = Object.values(data)
          .filter(a => a.iata && a.iata.length === 3)
          .map(a => ({
            iata: a.iata,
            name: a.name,
            city: a.city || a.name,
            country: a.country
          }));
      } catch (error) {
        console.warn("Airport dataset load failed:", error);
      }
    }

    function resolveAirportCode(inputValue) {
      if (!inputValue) return "";
      const directCode = inputValue.match(/\(([^)]+)\)/)?.[1];
      if (directCode) {
        return directCode.trim().toUpperCase();
      }
      const trimmed = inputValue.trim().toLowerCase();
      const found = airportsIndex.find(a =>
        a.iata.toLowerCase() === trimmed ||
        (a.city && a.city.toLowerCase() === trimmed) ||
        (a.name && a.name.toLowerCase() === trimmed)
      );
      if (found) return found.iata.toUpperCase();
      if (trimmed.length >= 3) {
        return trimmed.substring(0, 3).toUpperCase();
      }
      return "";
    }

    function toggleFlightDetails(detailsId) {
      const detailsEl = document.getElementById(detailsId);
      if (!detailsEl) return;
      detailsEl.style.display = detailsEl.style.display === 'none' || !detailsEl.style.display ? 'block' : 'none';
    }

    async function searchFlights() {
      const from = document.getElementById('from').value;
      const to = document.getElementById('to').value;
      const departureDate = document.getElementById('departureDate').value;

      // Validation
      if (!from || !to || !departureDate) {
        alert('Please fill in origin, destination, and departure date');
        return;
      }
      if (tripType !== 'one-way' && !returnDate) {
        alert('Please select a return date for round trips');
        return;
      }

      // Extract airport codes (e.g., "Lagos (LOS)" -> "LOS")
      const originCode = resolveAirportCode(from);
      const destCode = resolveAirportCode(to);

      if (!originCode || !destCode) {
        alert('Please select a valid airport from the list');
        return;
      }

      // Show loading
      const resultsDiv = document.getElementById('flightResults');
      const resultsContainer = document.getElementById('resultsContainer');
      resultsDiv.style.display = 'block';
      resultsContainer.innerHTML = '<div style="text-align: center; padding: 3rem;"><p style="font-size: 1.2rem; color: var(--gray-600);">üîç Searching for flights...</p></div>';

      try {
        const response = await fetch(`${API_BASE_URL}/search-flights`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            origin: originCode,
            destination: destCode,
            date: departureDate,
            returnDate: tripType === 'one-way' ? null : returnDate,
            cabinClass
          })
        });

        if (!response.ok) {
          throw new Error('Failed to fetch flights');
        }

        const flights = await response.json();

        if (flights.length === 0) {
          resultsContainer.innerHTML = '<div style="text-align: center; padding: 3rem;"><p style="font-size: 1.2rem; color: var(--gray-600);">No flights found for this route.</p></div>';
          return;
        }

        // Nigerian pricing: Add $200 markup and convert to Naira (1 USD = 1650 NGN)
        const USD_TO_NGN = 1650;
        const MARKUP_USD = 200;
        
        // Apply markup and conversion to each flight
        flights.forEach(flight => {
          const originalPrice = parseFloat(flight.final_price) || 0;
          const priceWithMarkup = originalPrice + MARKUP_USD;
          flight.price_ngn = priceWithMarkup * USD_TO_NGN;
          flight.original_usd = originalPrice;
          flight.final_usd = priceWithMarkup;
        });

        // Calculate total fare in Naira
        const totalFareNGN = flights.reduce((sum, f) => sum + f.price_ngn, 0);
        
        let flightsHTML = `
          <div style="background: var(--primary-gold); color: white; padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem; text-align: center;">
            <p style="margin: 0; font-size: 0.9rem; opacity: 0.9;">Total Fare for All Flights</p>
            <h2 style="margin: 0.5rem 0 0 0; font-size: 2.5rem;">‚Ç¶${totalFareNGN.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</h2>
            <p style="margin: 0.5rem 0 0 0; font-size: 0.85rem; opacity: 0.8;">Includes all taxes and service fees ‚Ä¢ Click on any flight below to book</p>
          </div>
        `;

        flights.forEach((flight, index) => {
          const slice = flight.slices?.[0];
          const stopText = (flight.slices?.[0]?.stops || 0) === 0 ? 'Non-stop' : `${flight.slices?.[0]?.stops} stop(s)`;
          
          // Safe date parsing with fallback
          const depDate = slice?.departure_time ? new Date(slice.departure_time) : null;
          const arrDate = slice?.arrival_time ? new Date(slice.arrival_time) : null;
          
          const depTime = depDate && !isNaN(depDate) ? depDate.toLocaleTimeString('en-US', {hour: '2-digit', minute: '2-digit'}) : '--:--';
          const arrTime = arrDate && !isNaN(arrDate) ? arrDate.toLocaleTimeString('en-US', {hour: '2-digit', minute: '2-digit'}) : '--:--';
          
          // Get airline name or code
          const airlineCode = slice?.segments?.[0]?.operating_airline || 'XX';
          const airlineMap = {
            'BA': 'British Airways',
            'LH': 'Lufthansa',
            'AF': 'Air France',
            'KL': 'KLM',
            'UA': 'United Airlines',
            'AA': 'American Airlines',
            'DL': 'Delta Airlines',
            'EK': 'Emirates',
            'EY': 'Etihad Airways',
            'AZ': 'Alitalia',
            'IB': 'Iberia',
            'SN': 'Brussels Airlines',
            'SQ': 'Singapore Airlines',
            'CX': 'Cathay Pacific',
            'NH': 'ANA',
            'JL': 'Japan Airlines',
            'KE': 'Korean Air',
            'TG': 'Thai Airways',
            'MH': 'Malaysia Airlines'
          };
          const airline = airlineMap[airlineCode] || `${airlineCode} Airlines` || 'Airline';
          const detailsId = `flight-details-${index}`;
          const segmentsHtml = (slice?.segments || []).map((seg, idx) => `
                    <div style="background: white; padding: 0.75rem; border-radius: 6px; border-left: 3px solid var(--primary-gold);">
                      <p style="color: var(--gray-600); margin: 0 0 0.25rem 0;"><strong>Segment ${idx + 1}</strong></p>
                      <p style="color: var(--gray-700); margin: 0 0 0.25rem 0;">üîπ Airline: <strong>${seg.airline_name || seg.marketing_airline_name || seg.operating_airline || 'Unknown'}</strong></p>
                      <p style="color: var(--gray-700); margin: 0 0 0.25rem 0;">üîπ Flight #: <strong>${seg.flight_number || 'N/A'}</strong></p>
                      <p style="color: var(--gray-700); margin: 0 0 0.25rem 0;">üîπ Aircraft: <strong>${seg.aircraft_name || seg.aircraft_code || 'Unknown'}</strong></p>
                      <p style="color: var(--gray-700); margin: 0;">üîπ Route: <strong>${seg.origin_iata || seg.origin} ‚Üí ${seg.destination_iata || seg.destination}</strong></p>
                    </div>
                  `).join('');

          flightsHTML += `
            <div style="background: white; border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 2px 15px rgba(0,0,0,0.08); border-top: 4px solid var(--primary-gold); transition: all 0.3s;">
              <!-- Main Flight Info -->
              <div style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 2rem; align-items: center; margin-bottom: 1.5rem;">
                <!-- Departure -->
                <div style="text-align: center;">
                  <p style="color: var(--gray-900); font-weight: 700; font-size: 1.3rem; margin: 0;">${depTime}</p>
                  <p style="color: var(--gray-500); font-size: 0.9rem; margin: 0.25rem 0 0 0;">${slice?.origin}</p>
                </div>

                <!-- Duration & Stops -->
                <div style="text-align: center;">
                  <p style="color: var(--gray-600); font-size: 0.9rem; font-weight: 600; margin: 0;">${stopText}</p>
                  <div style="display: flex; align-items: center; gap: 0.5rem; justify-content: center; margin: 0.5rem 0; font-size: 0.85rem; color: var(--gray-500);">
                    <span>‚úàÔ∏è</span>
                    <span>${slice?.duration || '--'}</span>
                  </div>
                </div>

                <!-- Arrival -->
                <div style="text-align: center;">
                  <p style="color: var(--gray-900); font-weight: 700; font-size: 1.3rem; margin: 0;">${arrTime}</p>
                  <p style="color: var(--gray-500); font-size: 0.9rem; margin: 0.25rem 0 0 0;">${slice?.destination}</p>
                </div>
              </div>

              <!-- Flight Details Section (collapsed by default) -->
              <div id="${detailsId}" style="display: none; background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <p style="font-weight: 600; color: var(--gray-900); margin: 0 0 0.75rem 0; font-size: 0.9rem;">Flight Details</p>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 0.85rem;">
                  ${segmentsHtml || '<p style="color: var(--gray-500); margin: 0;">No segment details available</p>'}
                </div>
              </div>

              <!-- Airline & Price -->
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <p style="color: var(--gray-600); font-size: 0.85rem; margin: 0;">Airline: <strong>${airline}</strong></p>
                  <p style="color: var(--gray-500); font-size: 0.8rem; margin: 0.25rem 0 0 0; font-family: monospace;">Offer: ${flight.offer_id}</p>
                </div>

                <div style="text-align: right;">
                  <p style="color: var(--gray-600); font-size: 0.9rem; margin: 0; font-weight: 600;">Fare</p>
                  <p style="color: var(--primary-gold); font-size: 1.8rem; font-weight: 700; margin: 0;">‚Ç¶${flight.price_ngn.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</p>
                  <button type="button" onclick="toggleFlightDetails('${detailsId}')" style="margin-top: 0.5rem; background: transparent; color: var(--primary-gold); border: 1px solid var(--primary-gold); padding: 0.35rem 0.75rem; border-radius: 6px; font-weight: 600; cursor: pointer;">
                    Details
                  </button>
                </div>

                <button onclick="openReservationModal(${JSON.stringify(flight).replace(/"/g, '&quot;')})" style="background: var(--primary-gold); color: white; padding: 0.75rem 2rem; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; white-space: nowrap;">
                  ‚úì Reserve
                </button>
              </div>
            </div>
          `;
        });

        resultsContainer.innerHTML = flightsHTML;

        // Scroll to results
        resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });

      } catch (error) {
        console.error('Error details:', error);
        
        // Check if it's a network error
        const isNetworkError = error.message.includes('fetch') || error.message === 'Failed to fetch' || error.name === 'TypeError';
        
        resultsContainer.innerHTML = `
          <div style="text-align: center; padding: 3rem; background: #fee; border-radius: 12px;">
            <p style="font-size: 1.2rem; color: #c00; margin-bottom: 0.5rem;">‚ùå Error fetching flights</p>
            <p style="color: var(--gray-600); margin-bottom: 1rem;">${error.message}</p>
            ${isNetworkError ? `
              <div style="background: #fff; padding: 1.5rem; border-radius: 8px; margin-top: 1rem; text-align: left;">
                <p style="font-weight: 600; margin-bottom: 0.5rem;">Troubleshooting Steps:</p>
                <ol style="color: var(--gray-700); line-height: 1.8;">
                  <li>Current API URL: <code>${API_BASE_URL}</code></li>
                  <li>If testing locally: Make sure the backend server is running</li>
                  <li>Open a new terminal and run: <code>cd "c:\\Users\\Angel\\Desktop\\CA\\caya-duffel-backend"; node server.js</code></li>
                  <li>If deployed: Ensure your backend is deployed and the API_BASE_URL is updated in the HTML file</li>
                  <li>Check CORS settings in server.js to allow your deployed domain</li>
                </ol>
              </div>
            ` : ''}
          </div>
        `;
      }
    }

    // Load airport dataset and wire autocomplete
    document.addEventListener('DOMContentLoaded', () => {
      loadAirportsDataset();

      const fromInput = document.getElementById('from');
      const toInput = document.getElementById('to');

      const handleInput = (event) => {
        updateAirportOptions(event.target.value || "");
      };

      if (fromInput) fromInput.addEventListener('input', handleInput);
      if (toInput) toInput.addEventListener('input', handleInput);

      // Note: Passenger buttons use inline onclick handlers, no need for duplicate listeners here

      // Note: Search button uses inline onclick handler, no need for duplicate listener here

      // Wire up reservation form
      document.getElementById('reservationForm').addEventListener('submit', submitReservation);
    });

    // Surface JS errors on the page
    window.addEventListener('error', (event) => {
      const existing = document.getElementById('jsErrorBanner');
      if (existing) return;
      const banner = document.createElement('div');
      banner.id = 'jsErrorBanner';
      banner.style.cssText = 'position:fixed;bottom:16px;left:16px;right:16px;background:#fee;border:1px solid #f99;color:#900;padding:12px 16px;border-radius:8px;z-index:9999;font-size:14px;';
      banner.textContent = `JavaScript error: ${event.message}`;
      document.body.appendChild(banner);
    });

    // Reservation modal functions
    let selectedFlightData = null;

    function openReservationModal(flight) {
      selectedFlightData = flight;
      document.getElementById('reservationModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeReservationModal() {
      document.getElementById('reservationModal').style.display = 'none';
      document.body.style.overflow = 'auto';
      document.getElementById('reservationForm').reset();
      selectedFlightData = null;
    }

    async function submitReservation(e) {
      e.preventDefault();
      
      if (!selectedFlightData) {
        alert('Flight information missing');
        return;
      }

      const formData = new FormData(e.target);
      const passenger = {
        surname: formData.get('surname'),
        given_names: formData.get('given_names'),
        email: formData.get('email'),
        phone: formData.get('phone'),
        dob: formData.get('dob'),
        nationality: formData.get('nationality'),
        passport: formData.get('passport')
      };

      const slice = selectedFlightData.slices?.[0];
      const flightInfo = {
        offer_id: selectedFlightData.offer_id,
        currency: selectedFlightData.currency,
        final_price: selectedFlightData.final_price,
        origin: slice?.origin,
        destination: slice?.destination,
        departure_time: slice?.departure_time,
        arrival_time: slice?.arrival_time
      };

      try {
        const response = await fetch(`${API_BASE_URL}/submit-reservation`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ passenger, flight: flightInfo })
        });

        if (!response.ok) throw new Error('Failed to submit reservation');
        const result = await response.json();

        alert('‚úì Reservation submitted successfully!\n\nWe will contact you shortly at:\n' + passenger.email);
        closeReservationModal();
      } catch (err) {
        console.error('Submission error:', err);
        alert('Error submitting reservation. Please try again.');
      }
    }

    // Close modal when clicking outside
    document.addEventListener('click', (e) => {
      const modal = document.getElementById('reservationModal');
      if (e.target === modal) {
        closeReservationModal();
      }
    });
  </script>
